{"version":3,"file":"timespanConversion.js","sourceRoot":"","sources":["../../src/timespanConversion.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT license.\n\nimport { QueryTimeInterval } from \"./models/timeInterval\";\n\nexport function convertTimespanToInterval(timespan: QueryTimeInterval): string {\n  if (isObjectWithProperties(timespan, [\"startTime\", \"endTime\", \"duration\"])) {\n    throw new TypeError(\"Invalid Timespan - contains startTime, endTime, and duration.\");\n  }\n\n  if (isObjectWithProperties(timespan, [\"startTime\", \"endTime\"])) {\n    return `${timespan.startTime.toISOString()}/${timespan.endTime.toISOString()}`;\n  } else if (isObjectWithProperties(timespan, [\"startTime\", \"duration\"])) {\n    return `${timespan.startTime.toISOString()}/${timespan.duration}`;\n  } else if (isObjectWithProperties(timespan, [\"duration\", \"endTime\"])) {\n    return `${timespan.duration}/${timespan.endTime.toISOString()}`;\n  } else if (isObjectWithProperties(timespan, [\"duration\"])) {\n    return timespan.duration;\n  }\n\n  throw new TypeError(\"Invalid Timespan - no valid fields assigned.\");\n}\n\nexport function convertIntervalToTimeIntervalObject(timespan: string): QueryTimeInterval {\n  if (timespan.includes(\"/\")) {\n    const intervalUnits: string[] = timespan.split(\"/\");\n    if (Date.parse(intervalUnits[0]) && Date.parse(intervalUnits[1])) {\n      return { startTime: new Date(intervalUnits[0]), endTime: new Date(intervalUnits[1]) };\n    } else if (Date.parse(intervalUnits[0]) && !Date.parse(intervalUnits[1])) {\n      return { startTime: new Date(intervalUnits[0]), duration: intervalUnits[1] };\n    } else if (!Date.parse(intervalUnits[0]) && Date.parse(intervalUnits[1])) {\n      return { duration: intervalUnits[0], endTime: new Date(intervalUnits[1]) };\n    } else {\n      return { duration: timespan };\n    }\n  } else {\n    return { duration: timespan };\n  }\n}\n/**\n * Helper TypeGuard that checks if the input is an object with the specified property.\n * Note: The property may be inherited.\n * @param thing - Any object.\n * @param property - The name of the property that should appear in the object.\n * @internal\n */\nexport function objectHasProperty<Thing, PropertyName extends string>(\n  thing: Thing,\n  property: PropertyName\n): thing is Extract<Thing, Record<PropertyName, unknown>> {\n  return typeof thing === \"object\" && property in (thing as Record<string, unknown>);\n}\n\n/**\n * Helper TypeGuard that checks if something is defined or not.\n * @param thing - Anything\n * @internal\n */\nexport function isDefined<T>(thing: T | undefined | null): thing is T {\n  return typeof thing !== \"undefined\" && thing !== null;\n}\n\n/**\n * Helper TypeGuard that checks if the input is an object with the specified properties.\n * Note: The properties may be inherited.\n * @param thing - Anything.\n * @param properties - The name of the properties that should appear in the object.\n * @internal\n */\nexport function isObjectWithProperties<Thing, PropertyName extends string>(\n  thing: Thing,\n  properties: PropertyName[]\n): thing is Extract<Thing, Record<PropertyName, unknown>> {\n  if (!isDefined(thing) || typeof thing !== \"object\") {\n    return false;\n  }\n\n  for (const property of properties) {\n    if (!objectHasProperty(thing, property)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n"]}